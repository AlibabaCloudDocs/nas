# 如何使用阿里云文件存储 NAS {#concept_n2t_lgf_xgb .concept}

本文主要介绍阿里云文件存储的定义及如何使用。

## 什么是阿里云文件存储 NAS {#section_zlq_4gf_xgb .section}

在线下企业存储领域，NAS 是 Network-Attached Storage 的简称，中文一般称为网络附加存储或者网络连接存储。用户在使用多台服务器时通过 NFS 或者 SMB 等网络协议共享访问文件存储 NAS。区别于传统企业文件存储，阿里云文件存储是一个在公共云上支持弹性扩展、高可靠、高可用以及高性能的分布式文件系统。它基于 POXIS 文件接口，天然适配原生操作系统，提供共享访问，同时保证一致性和锁互斥，并且性能随容量线性扩展。

## 文件存储 NAS 与块存储 EBS、对象存储 OSS 的区别 {#section_bl3_ngf_xgb .section}

NAS 与 EBS 属于计算类存储，需要和 ECS 绑定并通过 POSIX 接口访问文件系统。它们的差别在于 EBS 的文件系统在操作系统本地，NAS 是通过网络访问文件系统。OSS 没有文件系统，而是通过网络使用 API 接口访问 OSS。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/131419/155365870839576_zh-CN.png)

-   文件存储 NAS：文件存储是在存储系统上已经实现了文件系统，计算节点可通过网络直接使用 POSIX 接口同访问本地文件系统一样访问文件存储。文件存储 NAS 支持容量弹性扩展，无需预先规划容量，根据实际写入的数据动态扩展容量。文件存储 NAS 文件锁的机制天然支持共享访问。但是相比于块存储，文件存储由于网络的原因，时延较高，IOPS 性能相对要低一些。因此文件存储 NAS 多用于多计算节点，无状态集群的共享数据访问。
-   块存储 EBS：块存储是裸盘，不能被操作系统应用直接访问，而是通过 RAID 或 LVM 进行卷管理再格式化成文件系统（ext3、ext4、NTFS 等）进行访问。

    块存储的优势是性能高、时延低。它适合于OLTP 数据库、NoSQL 数据库等IO 密集型的高性能、低时延应用工作负载。由于块存储无法进行容量弹性扩展，单盘最大只能 32TB，并且对共享访问的支持有限，所以它需要配合类 Oracle RAC、WSFC Windows 故障转移集群等集群管理软件才能进行共享访问。

-   对象存储 OSS：对象存储是比较新的一种存储，相对于文件存储目录树的组织形式，对象存储采用扁平的文件组织形式。

    OSS 采用 RESTFul 接口访问，不支持文件随机读写，主要适用于互联网架构的海量数据的上传下载和分发。


## 文件存储 NAS 使用场景 {#section_hgg_wjf_xgb .section}

-   多台 ECS 服务器共享访问 NAS

    文件存储 NAS 最大的特点就是支持文件共享访问，每台 ECS 服务器像访问本地文件系统一样访问 NAS 并能读写到相同的文件数据，可以实现文件数据在多台 ECS 间全自动同步。文件存储 NAS 可以很好的解决集群模式下数据同步的问题。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/131419/155365870839577_zh-CN.png)

-   高性能网站服务

    常见的网站应用平台多为集群架构，每次代码更新都需要在所有集群服务器上发布版本。如果使用手工同步代码或软件，效率低成本高而且容易出错，通过 NAS 共享存储可以实现代码快速发布和同步。

-   WEB 内容管理平台

    内容管理平台多为 WEB 架构，采用无状态集群架构。过去常常采用 rsync 等方法在服务器间同步图片文件等数据，以便从 A 服务器上传的图片通过 B 服务器也能查看到。但由于无法做到完全的实时同步，在大压力业务下会出现数据不一致。使用 NAS 共享存储可以很简单的解决这个问题，集群服务器共享访问同一个 NAS 文件存储，自动实现数据共享和同步。

-   开发测试环境共享存储

    通过 NAS 共享存储，可以在开发测试环境下方便的共享代码，只需维护一套代码库。开发环境下完成开发，然后编译并加载到 CI 持续集成，最后代码发布上线，全流程打通，无需繁琐的代码拷贝。所以 NAS 共享存储能够更灵活、更快速地满足客户需求。

-   容器存储

    容器是构建微服务过程中不可或缺的组成部分，它可以快速预置、容易移植并提供进程隔离。每次启动容器时都需要访问原始数据并启用共享文件系统，这样无论它们在哪个实例上运行，都可以连接到该文件系统。由于很多应用的数据需要持久化保存，容器的本地存储无法满足诉求，因此容器对持久化存储的需求越来越强烈，共享文件存储成为容器最佳的选择。NAS 文件存储可以在多个 POD 共享数据，实现容器的高可用切换，NAS 容量的自动弹性扩展也能很好的满足容器业务灵活性。

-   高性能计算

    由于 NAS 具有很高的带宽和 IOPS，所以 NAS在高性能计算方面具有很多应用场景。

    例如，可以应用于 HPC、AI 自动驾驶、仿真、基因计算等大规模计算节点并行运算的场景，这些需要统一命名空间和高性能的共享文件存储访问。


## 如何选择阿里云文件存储 NAS {#section_azs_1lf_xgb .section}

阿里云文件存储 NAS 有多种规格类型，针对不同的应用模型选择最合适的规格类型才能发挥最佳的性能。不同类型 NAS 的特点和使用场景如下。

|类型|特点|使用场景|
|--|--|----|
|容量型 NAS| 大容量，低成本，弹性扩展

 3~10ms时延

 |文件共享，内容管理，备份|
|性能型 NAS| 大容量，弹性扩展

 1~2ms较低时延

 |文件共享，容器，大数据分析|
|极速型 NAS| 小容量，高性能

 0.5~1ms极低时延

 |高性能网站，代码托管，CI 编译|

